#name: Slash Command Bot
#
#on:
#  issue_comment:
#    types: [created]
#
#permissions:   # 确保 GITHUB_TOKEN 有写权限
#  contents: write
#  issues: write
#  pull-requests: write
#
#jobs:
#  slash_command:
#    runs-on: ubuntu-latest
#    steps:
#      - name: Check command
#        id: check
#        run: |
#          BODY="${{ github.event.comment.body }}"
#          echo "Comment: $BODY"
#
#          if [[ "$BODY" =~ ^/approve ]]; then
#            echo "command=approve" >> $GITHUB_OUTPUT
#          elif [[ "$BODY" =~ ^/lgtm ]]; then
#            echo "command=lgtm" >> $GITHUB_OUTPUT
#          elif [[ "$BODY" =~ ^/assign ]]; then
#            # 提取用户名（支持 /assign user 或 /assign @user）
#            USER=$(echo "$BODY" | sed -n 's/\/assign[[:space:]]\+@*\([a-zA-Z0-9_-]\+\).*/\1/p')
#            echo "command=assign" >> $GITHUB_OUTPUT
#            echo "assignee=$USER" >> $GITHUB_OUTPUT
#          else
#            echo "command=none" >> $GITHUB_OUTPUT
#          fi
#
#      - name: Add approved label
#        if: steps.check.outputs.command == 'approve'
#        uses: actions-ecosystem/action-add-labels@v1
#        with:
#          github_token: ${{ secrets.GITHUB_TOKEN }}
#          labels: approved
#
#      - name: Add lgtm label
#        if: steps.check.outputs.command == 'lgtm'
#        uses: actions-ecosystem/action-add-labels@v1
#        with:
#          github_token: ${{ secrets.GITHUB_TOKEN }}
#          labels: lgtm
#
#      - name: Assign issue/PR
#        if: steps.check.outputs.command == 'assign'
#        uses: pozil/auto-assign-issue@v2   # 👈 修复了这里
#        with:
#          token: ${{ secrets.GITHUB_TOKEN }}
#          assignees: ${{ steps.check.outputs.assignee }}
